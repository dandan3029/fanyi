<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>企业发布任务</title>
    <link rel="stylesheet" href="./js/layui/css/layui.css">
    <script src="./js/layui/layui.js" type="text/javascript"></script>

    <link href="css/newtask.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/popper.js/1.12.5/umd/popper.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
    <script src="./js/newtask.js" type="text/javascript"></script>

</head>
<body style="background-color: rgb(242,242,242);" onload="onLoad()">

<div class="nav">
    <div class="logo">
        <img src="images/LOGO.png" style="height:60px;">
    </div>

    <div class="center">
        <ul>
            <!--<li><a href="#" title="首页">首页</a></li>-->
            <!--<li><a href="#" title="成功案例">成功案例</a> </li>-->
            <!--<li><a class="active" href="#" style="color: #2493D3" title="企业任务">企业任务</a> </li>-->
            <!--<li><a href="#" title="作品">作品</a> </li>-->
            <!--<li><a href="#" title="榜单">榜单</a></li>-->
            <li><a id="go_main"        href="./index.html" title="首页">首页</a></li>
            <li><a id="go_success"     href="./success.html" title="成功案例">成功案例</a> </li>
            <li><a id="go_task"        class="active" href="./viewtask.html" style="color: #2493D3" title="企业任务">企业任务</a> </li>
            <li><a id="go_masterpiece" href="./masterpiece.html" title="作品">作品</a> </li>
            <li><a id="go_rank"        href="./rank.html" title="榜单">榜单</a></li>
        </ul>
    </div>
    <script>
        var dusername = null;
        var eusername = null;
        dusername = getUrlParamCN("designer_username");
        eusername = getUrlParamCN("enterprise_username");

        if(dusername != null){
            document.getElementById("go_main").href = "./index.html?designer_username=" +      dusername;
            document.getElementById("go_success").href = "./success.html?designer_username=" + dusername;
            document.getElementById("go_task").href = "./viewtask.html?designer_username=" +   dusername;
            document.getElementById("go_rank").href = "./rank.html?designer_username=" +       dusername;
            document.getElementById("go_masterpiece").href = "./viewm.html?designer_username="+dusername;
        }

        if (eusername != null){
            document.getElementById("go_main").href = "./index.html?enterprise_username=" + eusername;
            document.getElementById("go_success").href = "./success.html?enterprise_username=" + eusername;
            document.getElementById("go_task").innerText = "发布任务";
            document.getElementById("go_task").href = "./newtask.html?enterprise_username=" + eusername;
            document.getElementById("go_rank").href = "./rank.html?enterprise_username=" + eusername;
            document.getElementById("go_masterpiece").href = "./viewm.html?enterprise_username=" + eusername;
        }
    </script>
    <div class="right">
        <li><a id="minemine" href="#" title="我的">我的</a> </li>
        <li><a               href="#" title="手机APP">手机APP<div class="two-img"><img src="images/手机APP二维码.png"></div></a></li>
        <li><a id="movemove" href="./selfcenter.html" title="企业入口">用户入口</a></li>
    </div>
</div>


<!-----------------------------------------------主体部分------------------------------------------------>
<div class="contain">
    <div class="content-left" style="height:2700px;">
        <div class="title" style="height: 5.3%">
            <div class="box" style="border-bottom: 3px solid #1E9FFF;font-size: 40px">
                <span style="color:#1E9FFF;">&nbsp;&nbsp;新建任务<br></span>
            </div>
        </div>
        <!--表单部分-->
        <form action="post" class="f-register layui-form">
            <label for="need">需求名称：</label><br>
            <div style="width: 50%"><input type="text" class="form-control" id="need"></div>

            <label for="money">奖励金：</label>
            <div style="width: 50%"><input type="text" class="form-control" id="money"></div>

            <label for="test1">起止时间</label>
            <div class="layui-form-item" id="test1">
                <div class="layui-inline">
                    <div class="layui-input-inline" style="width: 200px;">
                        <input type="text" class="layui-input" id="time1">
                    </div>
                    <div class="layui-form-mid">-</div>
                    <div class="layui-input-inline" style="width: 200px;">
                        <input type="text" class="layui-input" id="time2">
                    </div>
                </div>
            </div>

            <label for="test2">宣传时间</label>
            <div class="layui-form-item" id="test2">
                <div class="layui-inline">
                    <div class="layui-input-inline" style="width: 200px;">
                        <input type="text" class="layui-input" id="time3">
                    </div>
                    <div class="layui-form-mid">-</div>
                    <div class="layui-input-inline" style="width: 200px;">
                        <input type="text" class="layui-input" id="time4">
                    </div>
                </div>
            </div>

            <label>企业打分：宣传效果得分</label><br><br>
            <div class="layui-form-item">
            <div class="layui-inline ">
                <div class="layui-input-inline" style="width: 100px;">
                    <input id="pro_A" type="text" name="price_min" placeholder="5" autocomplete="off" value="5" class="layui-input">
                </div>
                <div class="layui-form-mid">：</div>
                <div class="layui-input-inline" style="width: 100px;">
                    <input id="pro_B" type="text" name="price_max" placeholder="5" autocomplete="off" value="5" class="layui-input">
                </div>
            </div>
            </div>

            <label>任务类型：</label>
            <div class="layui-form-item">
                <div class="layui-input-block">
                    <input type="checkbox" title="产品广告" id="check1">
                    <input type="checkbox" title="品牌广告" checked id="check2">
                    <input type="checkbox" title="观念广告" id="check3">
                    <input type="checkbox" title="公益广告" id="check4">
                </div>
            </div>

            <label for="explain" style="margin-top: 30px;" style="font-size: 24px;">作品说明：</label>
            <textarea class="form-control" rows="10" id="explain"></textarea>

            <div class="layui-form-item" style="width: 30%;">
                <button class="layui-btn" lay-submit lay-filter="formDemo" onclick="onAddSubTitle()"
                        style="height: 60px;background: #1E9FFF">
                    添加任务要求</button>
            </div>

            <div id="node_1">
            <hr class="layui-bg-blue" style="height: 3px">
            <label for="need1">任务要求1：</label>
            <div style="width: 50%"><input type="text" class="form-control" id="need1"></div>
            <label for="explain1" style="margin-top: 30px;" style="font-size: 24px;">任务要求说明1：</label>
            <textarea class="form-control" rows="5" id="explain1"></textarea>
            </div>

            <hr class="layui-bg-blue" style="height: 3px">
            <!--上传样图-->
            <label for="xdaTanFileImg" style="margin-top: 30px;">上传样图：</label><br>
            <!--图片显示位置-->
            <div class="img-box" id="imgboxid" ></div>
            <div class="upload">
                <form>
                    <input type="file" id="xdaTanFileImg"  multiple="multiple"  name="fileAttach" onchange="xmTanUploadImg(this)" style="width:228px;height:186px;opacity: 0;"/>
                </form>
            </div><br><br>

            <div id="img_info">
                <!-- wait for a add -->
            </div>
            <button type="button" class="btn btn-outline-primary" align="center" onclick="onAddTask()"
                    style="width:100%;margin-top: 200px;font-size: 24px;">提交</button>
        </form>

    </div>
    <div class="content-right">
        <div class="right-bottom">
            <div class="list-head">
                <p style="float: left">相关需求</p>
                <p style="float: right;" onclick="rightbuttonMore()">更多></p>
            </div>
        </div>
        <div class="right-bottom" style="background-color: white;margin-bottom: 30px;">
            <div class="list-content"onclick="rightbuttonClicked(1)">
                <strong style="float: left;margin-right: 100px;">￥<span id="MM1">5000</span></strong>
                <strong><span id="NN1">科隆科技</span></strong>
                <strong style="float: right"><span id="CC1">57</span>人已报名</strong>
            </div>
            <div class="list-content" onclick="rightbuttonClicked(2)">
                <strong style="float: left;margin-right: 100px;">￥<span id="MM2">5000</span></strong>
                <strong><span id="NN2">科隆科技</span></strong>
                <strong style="float: right"><span id="CC2">57</span>人已报名</strong>
            </div>
            <div class="list-content" onclick="rightbuttonClicked(3)">
                <strong style="float: left;margin-right: 100px;">￥<span id="MM3">5000</span></strong>
                <strong><span id="NN3">科隆科技</span></strong>
                <strong style="float: right"><span id="CC3">57</span>人已报名</strong>
            </div>
            <div class="list-content" style="border: none;" onclick="rightbuttonClicked(4)">
                <strong style="float: left;margin-right: 100px;">￥<span id="MM4">5000</span></strong>
                <strong><span id="NN4">科隆科技</span></strong>
                <strong style="float: right"><span id="CC4">57</span>人已报名</strong>
            </div>
        </div>
    </div>
</div>
<script>
    var serverPath = "localhost:8080";
    var Right_data = null;
    var json0 = {};
    json0.id = 1;
    var JsonStr0 = JSON.stringify(json0);
    $.ajax({
        async:false,
        type:"post",
        contentType: "application/json; charset=utf-8",
        url:"http://" + serverPath + "/task_get_All.action",
        data:JsonStr0,
        dataType:"json",

        success:function(data){
            console.log(data);

            Right_data = data.list.sort(function randomsort(a, b) {
                return Math.random()>.5 ? -1 : 1;
            });
        },
        error:function(data){
            layer.msg("网络异常...")
        }
    });
    for (var j=0;j<Right_data.length;j++){
        var now = new Date();
        var end = new Date(Right_data[j].end_day);
        var res = end.getTime() - now.getTime();
        if (res < 0){
            Right_data.splice(j,1);
            j--;
        }
    }
    for (var j=1;j<=Right_data.length;j++){
        console.log(j);
        console.log(Right_data[j-1]);
        var box1 = document.getElementById("MM" + j);
        console.log(box1);
        box1.innerText = Right_data[j-1].money;

        var box2 = document.getElementById("NN" + j);
        console.log(box2);
        box2.innerText = Right_data[j-1].title;

        var box3 = document.getElementById("CC" + j);
        box3.innerText = Right_data[j-1].num_join;
    }
</script>
<!-- 模态框 -->
<div class="modal fade" id="myModal">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- 模态框主体 -->
            <div class="modal-body" style="text-align: center">
                <h3 style="font-size: 26px;color: #323232;"><strong>链接复制成功</strong></h3>
                <div class="go-copy">
                    <h3 style="font-size: 26px;color: #666666;display: inline-block"><strong>去粘贴：</strong></h3>
                    <a href="#" ><img src="images/腾讯QQ.png"></a>
                    <a href="#" ><img src="images/微信.png"></a>
                    <a href="#" ><img src="images/微博.png"></a>
                    <a href="#" ><img src="images/腾讯微博.png"></a>
                </div>
            </div>

        </div>
    </div>
</div>

<!---------------------------------------------------页脚------------------------------------------------------->
<div class="foot">
    <div class="on_foot">
        <div class="foot-left">
            <p class="foot-left-title">我是设计师</p>
            <ul>
                <li><a href="#">认证流程</a></li>
                <li><a href="#">邦得等级</a></li>
                <li><a href="#">上传作品</a></li>
                <li><a href="#">酬金分配</a></li>
                <li><a href="#">      </a></li>
            </ul>
        </div>
        <div class="foot-right">
            <p class="foot-right-title">我是企业</p>
            <ul>
                <li><a href="#">任务发布</a></li>
                <li><a href="#">付款方式</a></li>
                <li><a href="#">匹配机制</a></li>
                <li><a href="#">广告签约</a></li>
                <li><a href="#">平台案例</a></li>
                <li><a href="#">      </a></li>
            </ul>
        </div>
    </div>
    <div class="low_foot">
        <ul>
            <li class="v_line2"><a href="#">关于我们</a></li>
            <li class="v_line2"><a href="#">发展历程</a></li>
            <li class="v_line2"><a href="#">人才招募</a></li>
            <li class="v_line2"><a href="#">联系我们</a></li>
            <li class="v_line2"><a href="#">服务规则</a></li>
            <li class="v_line2"><a href="#">商标版权</a></li>
            <li class="v_line2"><a href="#">常见问题</a></li>
            <li class="v_line2"><a href="#">网站地图</a></li>
            <li class="v_line2"><a href="#">设计师指南</a></li>
            <li><a href="#">友情连接</a></li>
        </ul>
    </div>
</div>
<script>
    //Demo
    layui.use('form', function(){
        var form = layui.form;
        //监听提交
        form.on('submit(formDemo)', function(data){
            return false;
        });
    });

    layui.use('laydate', function(){
        var laydate = layui.laydate;

        //执行一个laydate实例
        laydate.render({
            elem: '#time1', //指定元素
            theme: '#1E9FFF',
        });
        laydate.render({
            elem: '#time2',
            theme: '#1E9FFF',
        })
        laydate.render({
            elem: '#time3',
            theme: '#1E9FFF',
        })
        laydate.render({
            elem: '#time4',
            theme: '#1E9FFF',
        })
    });
</script>

</body>
</html>